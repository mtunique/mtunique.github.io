<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Linux下用户空间调试工具 | mtunique blog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Linux下用户空间调试工具"><meta property="og:description" content="根据定义，调试工具是那些那些使我们能够监测、控制和纠正其他程序的程序。我们为什么应该用调试工具呢? 在有些情况下，运行一些程序的时候我们会被卡住，我们需要明白究竟发生了什么。 例如, 我们正在运行应用程序，它产生了一些错误消息。要修复这些错误，我们应该先找出为什么产生这些错误的消息和这些错误消息从哪里产生的。 一个应用程序可能突然挂起，我们必须了解其他什么进程同时在运行。我们可能还必须弄清楚进程x挂起的时候在做什么。为了剖析这些细节， 我们需要调试工具的帮助。有几个Linux下的用户空间调试工具和技术，他们用来分析用户空间问题相当有用。他们是:
 print语句 查询 (/proc, /sys etc) 跟踪 (strace/ltrace) Valgrind (memwatch) GDB  让我们一个个地了解。
1.print语句 这是一个基本的原始的调试问题的方法。 我们可以在程序中插入print语句来了解控制流和变量值。 虽然这是一个简单的技术, 但它有一些缺点的。 程序需要进行编辑以添加print语句，然后不得不重新编译，重新运行来获得输出。 如果要调试的程序相当大，这是一个耗时的方法。
2. 查询 在某些情况下，我们需要弄清楚在一个运行在内核中的进程的状态和内存映射。为了获得这些信息，我们不需要在内核中插入任何代码。 相反，可以用 /proc 文件系统。
/proc 是一个伪文件系统，系统一起启动运行就收集着运行时系统的信息 (cpu信息, 内存容量 等)。
ls /proc的输出
正如你看到的, 系统中运行的每一个进程在/proc文件系统中有一个以进程id命名的项。每个进程的细节信息可以在进程id对应的目录下的文件中获得。
ls /proc/pid的输出
解释/proc文件系统内的所有条目超出了本文的范围。一些有用的列举如下：
 /proc/cmdline -> 内核命令行 /proc/cpuinfo -> 关于处理器的品牌，型号信息等 /proc/filesystems -> 文件系统的内核支持的信息 /proc//cmdline -> 命令行参数传递到当前进程 /proc//mem -> 当前进程持有的内存 /proc//status -> 当前进程的状态  3. 跟踪 strace的和ltrace是两个在Linux中用来追踪程序的执行细节的跟踪工具
strace: strace拦截和记录系统调用并且由它来接收的信号。对于用户，它显示了系统调用，传递给它们的参数和返回值。 strace的可以附着到已在运行的进程中，或到一个新的进程。它作为一个针对开发者和系统管理员的诊断，调试工具是很有用的。它也可以用来当为一个通过跟踪不同的程序调用来了解系统的工具。这个工具的好处是不需要源代码和程序不需要重新编译。"><meta property="og:type" content="article"><meta property="og:url" content="https://mtunique.com/posts/linux_userspace/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-12-29T17:51:27+08:00"><meta property="article:modified_time" content="2014-12-29T17:51:27+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Linux下用户空间调试工具"><meta name=twitter:description content="根据定义，调试工具是那些那些使我们能够监测、控制和纠正其他程序的程序。我们为什么应该用调试工具呢? 在有些情况下，运行一些程序的时候我们会被卡住，我们需要明白究竟发生了什么。 例如, 我们正在运行应用程序，它产生了一些错误消息。要修复这些错误，我们应该先找出为什么产生这些错误的消息和这些错误消息从哪里产生的。 一个应用程序可能突然挂起，我们必须了解其他什么进程同时在运行。我们可能还必须弄清楚进程x挂起的时候在做什么。为了剖析这些细节， 我们需要调试工具的帮助。有几个Linux下的用户空间调试工具和技术，他们用来分析用户空间问题相当有用。他们是:
 print语句 查询 (/proc, /sys etc) 跟踪 (strace/ltrace) Valgrind (memwatch) GDB  让我们一个个地了解。
1.print语句 这是一个基本的原始的调试问题的方法。 我们可以在程序中插入print语句来了解控制流和变量值。 虽然这是一个简单的技术, 但它有一些缺点的。 程序需要进行编辑以添加print语句，然后不得不重新编译，重新运行来获得输出。 如果要调试的程序相当大，这是一个耗时的方法。
2. 查询 在某些情况下，我们需要弄清楚在一个运行在内核中的进程的状态和内存映射。为了获得这些信息，我们不需要在内核中插入任何代码。 相反，可以用 /proc 文件系统。
/proc 是一个伪文件系统，系统一起启动运行就收集着运行时系统的信息 (cpu信息, 内存容量 等)。
ls /proc的输出
正如你看到的, 系统中运行的每一个进程在/proc文件系统中有一个以进程id命名的项。每个进程的细节信息可以在进程id对应的目录下的文件中获得。
ls /proc/pid的输出
解释/proc文件系统内的所有条目超出了本文的范围。一些有用的列举如下：
 /proc/cmdline -> 内核命令行 /proc/cpuinfo -> 关于处理器的品牌，型号信息等 /proc/filesystems -> 文件系统的内核支持的信息 /proc//cmdline -> 命令行参数传递到当前进程 /proc//mem -> 当前进程持有的内存 /proc//status -> 当前进程的状态  3. 跟踪 strace的和ltrace是两个在Linux中用来追踪程序的执行细节的跟踪工具
strace: strace拦截和记录系统调用并且由它来接收的信号。对于用户，它显示了系统调用，传递给它们的参数和返回值。 strace的可以附着到已在运行的进程中，或到一个新的进程。它作为一个针对开发者和系统管理员的诊断，调试工具是很有用的。它也可以用来当为一个通过跟踪不同的程序调用来了解系统的工具。这个工具的好处是不需要源代码和程序不需要重新编译。"><link rel=stylesheet href=https://mtunique.com/css/style-dark.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://mtunique.com/images/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-65601165-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Writings</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://mtunique.com/posts/spark_base/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i></a></li><li><a class=icon href=https://mtunique.com/posts/spark_streaming_session/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle()" onmouseout="$('#i-next').toggle()"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f&text=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f&title=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f&is_video=false&description=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7&body=Check out this article: https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f&title=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f&title=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f&name=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7&description=%e6%a0%b9%e6%8d%ae%e5%ae%9a%e4%b9%89%ef%bc%8c%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7%e6%98%af%e9%82%a3%e4%ba%9b%e9%82%a3%e4%ba%9b%e4%bd%bf%e6%88%91%e4%bb%ac%e8%83%bd%e5%a4%9f%e7%9b%91%e6%b5%8b%e3%80%81%e6%8e%a7%e5%88%b6%e5%92%8c%e7%ba%a0%e6%ad%a3%e5%85%b6%e4%bb%96%e7%a8%8b%e5%ba%8f%e7%9a%84%e7%a8%8b%e5%ba%8f%e3%80%82%e6%88%91%e4%bb%ac%e4%b8%ba%e4%bb%80%e4%b9%88%e5%ba%94%e8%af%a5%e7%94%a8%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7%e5%91%a2%3f%20%e5%9c%a8%e6%9c%89%e4%ba%9b%e6%83%85%e5%86%b5%e4%b8%8b%ef%bc%8c%e8%bf%90%e8%a1%8c%e4%b8%80%e4%ba%9b%e7%a8%8b%e5%ba%8f%e7%9a%84%e6%97%b6%e5%80%99%e6%88%91%e4%bb%ac%e4%bc%9a%e8%a2%ab%e5%8d%a1%e4%bd%8f%ef%bc%8c%e6%88%91%e4%bb%ac%e9%9c%80%e8%a6%81%e6%98%8e%e7%99%bd%e7%a9%b6%e7%ab%9f%e5%8f%91%e7%94%9f%e4%ba%86%e4%bb%80%e4%b9%88%e3%80%82%20%e4%be%8b%e5%a6%82%2c%20%e6%88%91%e4%bb%ac%e6%ad%a3%e5%9c%a8%e8%bf%90%e8%a1%8c%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f%ef%bc%8c%e5%ae%83%e4%ba%a7%e7%94%9f%e4%ba%86%e4%b8%80%e4%ba%9b%e9%94%99%e8%af%af%e6%b6%88%e6%81%af%e3%80%82%e8%a6%81%e4%bf%ae%e5%a4%8d%e8%bf%99%e4%ba%9b%e9%94%99%e8%af%af%ef%bc%8c%e6%88%91%e4%bb%ac%e5%ba%94%e8%af%a5%e5%85%88%e6%89%be%e5%87%ba%e4%b8%ba%e4%bb%80%e4%b9%88%e4%ba%a7%e7%94%9f%e8%bf%99%e4%ba%9b%e9%94%99%e8%af%af%e7%9a%84%e6%b6%88%e6%81%af%e5%92%8c%e8%bf%99%e4%ba%9b%e9%94%99%e8%af%af%e6%b6%88%e6%81%af%e4%bb%8e%e5%93%aa%e9%87%8c%e4%ba%a7%e7%94%9f%e7%9a%84%e3%80%82%20%e4%b8%80%e4%b8%aa%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f%e5%8f%af%e8%83%bd%e7%aa%81%e7%84%b6%e6%8c%82%e8%b5%b7%ef%bc%8c%e6%88%91%e4%bb%ac%e5%bf%85%e9%a1%bb%e4%ba%86%e8%a7%a3%e5%85%b6%e4%bb%96%e4%bb%80%e4%b9%88%e8%bf%9b%e7%a8%8b%e5%90%8c%e6%97%b6%e5%9c%a8%e8%bf%90%e8%a1%8c%e3%80%82%e6%88%91%e4%bb%ac%e5%8f%af%e8%83%bd%e8%bf%98%e5%bf%85%e9%a1%bb%e5%bc%84%e6%b8%85%e6%a5%9a%e8%bf%9b%e7%a8%8bx%e6%8c%82%e8%b5%b7%e7%9a%84%e6%97%b6%e5%80%99%e5%9c%a8%e5%81%9a%e4%bb%80%e4%b9%88%e3%80%82%e4%b8%ba%e4%ba%86%e5%89%96%e6%9e%90%e8%bf%99%e4%ba%9b%e7%bb%86%e8%8a%82%ef%bc%8c%c2%a0%e6%88%91%e4%bb%ac%e9%9c%80%e8%a6%81%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7%e7%9a%84%e5%b8%ae%e5%8a%a9%e3%80%82%e6%9c%89%e5%87%a0%e4%b8%aaLinux%e4%b8%8b%e7%9a%84%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7%e5%92%8c%e6%8a%80%e6%9c%af%ef%bc%8c%e4%bb%96%e4%bb%ac%e7%94%a8%e6%9d%a5%e5%88%86%e6%9e%90%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e9%97%ae%e9%a2%98%e7%9b%b8%e5%bd%93%e6%9c%89%e7%94%a8%e3%80%82%e4%bb%96%e4%bb%ac%e6%98%af%3a%0a%20print%e8%af%ad%e5%8f%a5%20%e6%9f%a5%e8%af%a2%20%28%2fproc%2c%20%2fsys%c2%a0etc%29%20%e8%b7%9f%e8%b8%aa%c2%a0%28strace%2fltrace%29%20Valgrind%c2%a0%28memwatch%29%20GDB%20%20%e8%ae%a9%e6%88%91%e4%bb%ac%e4%b8%80%e4%b8%aa%e4%b8%aa%e5%9c%b0%e4%ba%86%e8%a7%a3%e3%80%82%0a1.print%e8%af%ad%e5%8f%a5%20%e8%bf%99%e6%98%af%e4%b8%80%e4%b8%aa%e5%9f%ba%e6%9c%ac%e7%9a%84%e5%8e%9f%e5%a7%8b%e7%9a%84%e8%b0%83%e8%af%95%e9%97%ae%e9%a2%98%e7%9a%84%e6%96%b9%e6%b3%95%e3%80%82%20%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e5%9c%a8%e7%a8%8b%e5%ba%8f%e4%b8%ad%e6%8f%92%e5%85%a5print%e8%af%ad%e5%8f%a5%e6%9d%a5%e4%ba%86%e8%a7%a3%e6%8e%a7%e5%88%b6%e6%b5%81%e5%92%8c%e5%8f%98%e9%87%8f%e5%80%bc%e3%80%82%20%e8%99%bd%e7%84%b6%e8%bf%99%e6%98%af%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%e6%8a%80%e6%9c%af%2c%20%e4%bd%86%e5%ae%83%e6%9c%89%e4%b8%80%e4%ba%9b%e7%bc%ba%e7%82%b9%e7%9a%84%e3%80%82%20%e7%a8%8b%e5%ba%8f%e9%9c%80%e8%a6%81%e8%bf%9b%e8%a1%8c%e7%bc%96%e8%be%91%e4%bb%a5%e6%b7%bb%e5%8a%a0print%e8%af%ad%e5%8f%a5%ef%bc%8c%e7%84%b6%e5%90%8e%e4%b8%8d%e5%be%97%e4%b8%8d%e9%87%8d%e6%96%b0%e7%bc%96%e8%af%91%ef%bc%8c%e9%87%8d%e6%96%b0%e8%bf%90%e8%a1%8c%e6%9d%a5%e8%8e%b7%e5%be%97%e8%be%93%e5%87%ba%e3%80%82%c2%a0%e5%a6%82%e6%9e%9c%e8%a6%81%e8%b0%83%e8%af%95%e7%9a%84%e7%a8%8b%e5%ba%8f%e7%9b%b8%e5%bd%93%e5%a4%a7%ef%bc%8c%e8%bf%99%e6%98%af%e4%b8%80%e4%b8%aa%e8%80%97%e6%97%b6%e7%9a%84%e6%96%b9%e6%b3%95%e3%80%82%0a2.%c2%a0%e6%9f%a5%e8%af%a2%20%e5%9c%a8%e6%9f%90%e4%ba%9b%e6%83%85%e5%86%b5%e4%b8%8b%ef%bc%8c%e6%88%91%e4%bb%ac%e9%9c%80%e8%a6%81%e5%bc%84%e6%b8%85%e6%a5%9a%e5%9c%a8%e4%b8%80%e4%b8%aa%e8%bf%90%e8%a1%8c%e5%9c%a8%e5%86%85%e6%a0%b8%e4%b8%ad%e7%9a%84%e8%bf%9b%e7%a8%8b%e7%9a%84%e7%8a%b6%e6%80%81%e5%92%8c%e5%86%85%e5%ad%98%e6%98%a0%e5%b0%84%e3%80%82%e4%b8%ba%e4%ba%86%e8%8e%b7%e5%be%97%e8%bf%99%e4%ba%9b%e4%bf%a1%e6%81%af%ef%bc%8c%e6%88%91%e4%bb%ac%e4%b8%8d%e9%9c%80%e8%a6%81%e5%9c%a8%e5%86%85%e6%a0%b8%e4%b8%ad%e6%8f%92%e5%85%a5%e4%bb%bb%e4%bd%95%e4%bb%a3%e7%a0%81%e3%80%82%20%e7%9b%b8%e5%8f%8d%ef%bc%8c%e5%8f%af%e4%bb%a5%e7%94%a8%20%2fproc%c2%a0%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e3%80%82%0a%2fproc%20%e6%98%af%e4%b8%80%e4%b8%aa%e4%bc%aa%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%ef%bc%8c%e7%b3%bb%e7%bb%9f%e4%b8%80%e8%b5%b7%e5%90%af%e5%8a%a8%e8%bf%90%e8%a1%8c%e5%b0%b1%e6%94%b6%e9%9b%86%e7%9d%80%e8%bf%90%e8%a1%8c%e6%97%b6%e7%b3%bb%e7%bb%9f%e7%9a%84%e4%bf%a1%e6%81%af%20%28cpu%e4%bf%a1%e6%81%af%2c%20%e5%86%85%e5%ad%98%e5%ae%b9%e9%87%8f%c2%a0%e7%ad%89%29%e3%80%82%0als%20%2fproc%e7%9a%84%e8%be%93%e5%87%ba%0a%e6%ad%a3%e5%a6%82%e4%bd%a0%e7%9c%8b%e5%88%b0%e7%9a%84%2c%c2%a0%e7%b3%bb%e7%bb%9f%e4%b8%ad%e8%bf%90%e8%a1%8c%e7%9a%84%e6%af%8f%e4%b8%80%e4%b8%aa%e8%bf%9b%e7%a8%8b%e5%9c%a8%2fproc%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e4%b8%ad%e6%9c%89%e4%b8%80%e4%b8%aa%e4%bb%a5%e8%bf%9b%e7%a8%8bid%e5%91%bd%e5%90%8d%e7%9a%84%e9%a1%b9%e3%80%82%e6%af%8f%e4%b8%aa%e8%bf%9b%e7%a8%8b%e7%9a%84%e7%bb%86%e8%8a%82%e4%bf%a1%e6%81%af%e5%8f%af%e4%bb%a5%e5%9c%a8%e8%bf%9b%e7%a8%8bid%e5%af%b9%e5%ba%94%e7%9a%84%e7%9b%ae%e5%bd%95%e4%b8%8b%e7%9a%84%e6%96%87%e4%bb%b6%e4%b8%ad%e8%8e%b7%e5%be%97%e3%80%82%0als%20%2fproc%2fpid%e7%9a%84%e8%be%93%e5%87%ba%0a%e8%a7%a3%e9%87%8a%2fproc%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e5%86%85%e7%9a%84%e6%89%80%e6%9c%89%e6%9d%a1%e7%9b%ae%e8%b6%85%e5%87%ba%e4%ba%86%e6%9c%ac%e6%96%87%e7%9a%84%e8%8c%83%e5%9b%b4%e3%80%82%e4%b8%80%e4%ba%9b%e6%9c%89%e7%94%a8%e7%9a%84%e5%88%97%e4%b8%be%e5%a6%82%e4%b8%8b%ef%bc%9a%0a%20%2fproc%2fcmdline%20-%26gt%3b%c2%a0%e5%86%85%e6%a0%b8%e5%91%bd%e4%bb%a4%e8%a1%8c%20%2fproc%2fcpuinfo%20-%26gt%3b%c2%a0%e5%85%b3%e4%ba%8e%e5%a4%84%e7%90%86%e5%99%a8%e7%9a%84%e5%93%81%e7%89%8c%ef%bc%8c%e5%9e%8b%e5%8f%b7%e4%bf%a1%e6%81%af%e7%ad%89%20%2fproc%2ffilesystems%20-%26gt%3b%c2%a0%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e7%9a%84%e5%86%85%e6%a0%b8%e6%94%af%e6%8c%81%e7%9a%84%e4%bf%a1%e6%81%af%20%2fproc%2f%2fcmdline%20-%26gt%3b%c2%a0%e5%91%bd%e4%bb%a4%e8%a1%8c%e5%8f%82%e6%95%b0%e4%bc%a0%e9%80%92%e5%88%b0%e5%bd%93%e5%89%8d%e8%bf%9b%e7%a8%8b%20%2fproc%2f%2fmem%20-%26gt%3b%c2%a0%e5%bd%93%e5%89%8d%e8%bf%9b%e7%a8%8b%e6%8c%81%e6%9c%89%e7%9a%84%e5%86%85%e5%ad%98%20%2fproc%2f%2fstatus%20-%26gt%3b%c2%a0%e5%bd%93%e5%89%8d%e8%bf%9b%e7%a8%8b%e7%9a%84%e7%8a%b6%e6%80%81%20%203.%c2%a0%e8%b7%9f%e8%b8%aa%20strace%e7%9a%84%e5%92%8cltrace%e6%98%af%e4%b8%a4%e4%b8%aa%e5%9c%a8Linux%e4%b8%ad%e7%94%a8%e6%9d%a5%e8%bf%bd%e8%b8%aa%e7%a8%8b%e5%ba%8f%e7%9a%84%e6%89%a7%e8%a1%8c%e7%bb%86%e8%8a%82%e7%9a%84%e8%b7%9f%e8%b8%aa%e5%b7%a5%e5%85%b7%0astrace%3a%20strace%e6%8b%a6%e6%88%aa%e5%92%8c%e8%ae%b0%e5%bd%95%e7%b3%bb%e7%bb%9f%e8%b0%83%e7%94%a8%e5%b9%b6%e4%b8%94%e7%94%b1%e5%ae%83%e6%9d%a5%e6%8e%a5%e6%94%b6%e7%9a%84%e4%bf%a1%e5%8f%b7%e3%80%82%e5%af%b9%e4%ba%8e%e7%94%a8%e6%88%b7%ef%bc%8c%e5%ae%83%e6%98%be%e7%a4%ba%e4%ba%86%e7%b3%bb%e7%bb%9f%e8%b0%83%e7%94%a8%ef%bc%8c%e4%bc%a0%e9%80%92%e7%bb%99%e5%ae%83%e4%bb%ac%e7%9a%84%e5%8f%82%e6%95%b0%e5%92%8c%e8%bf%94%e5%9b%9e%e5%80%bc%e3%80%82%c2%a0strace%e7%9a%84%e5%8f%af%e4%bb%a5%e9%99%84%e7%9d%80%e5%88%b0%e5%b7%b2%e5%9c%a8%e8%bf%90%e8%a1%8c%e7%9a%84%e8%bf%9b%e7%a8%8b%e4%b8%ad%ef%bc%8c%e6%88%96%e5%88%b0%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e8%bf%9b%e7%a8%8b%e3%80%82%e5%ae%83%e4%bd%9c%e4%b8%ba%e4%b8%80%e4%b8%aa%e9%92%88%e5%af%b9%e5%bc%80%e5%8f%91%e8%80%85%e5%92%8c%e7%b3%bb%e7%bb%9f%e7%ae%a1%e7%90%86%e5%91%98%e7%9a%84%e8%af%8a%e6%96%ad%ef%bc%8c%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7%e6%98%af%e5%be%88%e6%9c%89%e7%94%a8%e7%9a%84%e3%80%82%e5%ae%83%e4%b9%9f%e5%8f%af%e4%bb%a5%e7%94%a8%e6%9d%a5%e5%bd%93%e4%b8%ba%e4%b8%80%e4%b8%aa%e9%80%9a%e8%bf%87%e8%b7%9f%e8%b8%aa%e4%b8%8d%e5%90%8c%e7%9a%84%e7%a8%8b%e5%ba%8f%e8%b0%83%e7%94%a8%e6%9d%a5%e4%ba%86%e8%a7%a3%e7%b3%bb%e7%bb%9f%e7%9a%84%e5%b7%a5%e5%85%b7%e3%80%82%e8%bf%99%e4%b8%aa%e5%b7%a5%e5%85%b7%e7%9a%84%e5%a5%bd%e5%a4%84%e6%98%af%e4%b8%8d%e9%9c%80%e8%a6%81%e6%ba%90%e4%bb%a3%e7%a0%81%e5%92%8c%e7%a8%8b%e5%ba%8f%e4%b8%8d%e9%9c%80%e8%a6%81%e9%87%8d%e6%96%b0%e7%bc%96%e8%af%91%e3%80%82" aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f&t=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><ul><li><a href=#1print语句>1.<code>print</code>语句</a></li><li><a href=#2查询>2. 查询</a></li><li><a href=#3跟踪>3. 跟踪</a><ul><li><a href=#strace>strace:</a></li><li><a href=#ltrace>ltrace:</a></li></ul></li><li><a href=#4valgrind>4. Valgrind</a></li><li><a href=#5gdb>5. GDB</a><ul><li><a href=#编译程序>编译程序:</a></li><li><a href=#调用gdb>调用 GDB:</a></li><li><a href=#启动程序>启动程序:</a></li><li><a href=#给程序传参数>给程序传参数:</a></li><li><a href=#检查堆栈>检查堆栈:</a></li><li><a href=#检查数据>检查数据:</a></li><li><a href=#检查源码>检查源码:</a></li><li><a href=#停止和恢复程序>停止和恢复程序:</a></li><li><a href=#退出gdb>退出 GDB:</a></li></ul></li><li><a href=#总结>总结</a></li></ul></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Linux下用户空间调试工具</h1><div class=meta><div class=postdate><time datetime="2014-12-29 17:51:27 +0800 +0800" itemprop=datePublished>2014-12-29</time></div><div class=article-read-time><i class="far fa-clock"></i>
14 minute read</div><div class=article-category><i class="fas fa-archive"></i>
<a class=category-link href=/categories/linux>linux</a></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/tags/linux rel=tag>linux</a></div></div></header><div class=content itemprop=articleBody><p>根据定义，调试工具是那些那些使我们能够监测、控制和纠正其他程序的程序。我们为什么应该用调试工具呢? 在有些情况下，运行一些程序的时候我们会被卡住，我们需要明白究竟发生了什么。 例如, 我们正在运行应用程序，它产生了一些错误消息。要修复这些错误，我们应该先找出为什么产生这些错误的消息和这些错误消息从哪里产生的。 一个应用程序可能突然挂起，我们必须了解其他什么进程同时在运行。我们可能还必须弄清楚进程<code>x</code>挂起的时候在做什么。为了剖析这些细节， 我们需要调试工具的帮助。有几个Linux下的用户空间调试工具和技术，他们用来分析用户空间问题相当有用。他们是:</p><ul><li><code>print</code>语句</li><li>查询 (/proc, /sys etc)</li><li>跟踪 (strace/ltrace)</li><li>Valgrind (memwatch)</li><li>GDB</li></ul><p>让我们一个个地了解。</p><h3 id=1print语句>1.<code>print</code>语句</h3><p>这是一个基本的原始的调试问题的方法。 我们可以在程序中插入print语句来了解控制流和变量值。 虽然这是一个简单的技术, 但它有一些缺点的。 程序需要进行编辑以添加<code>print</code>语句，然后不得不重新编译，重新运行来获得输出。 如果要调试的程序相当大，这是一个耗时的方法。</p><h3 id=2查询>2. 查询</h3><p>在某些情况下，我们需要弄清楚在一个运行在内核中的进程的状态和内存映射。为了获得这些信息，我们不需要在内核中插入任何代码。 相反，可以用 /proc 文件系统。</p><p>/proc 是一个伪文件系统，系统一起启动运行就收集着运行时系统的信息 (cpu信息, 内存容量 等)。</p><p><img src=https://dn-mtunique.qbox.me/proc-output.png alt="output of ls /proc"> <code>ls /proc</code>的输出</p><p>正如你看到的, 系统中运行的每一个进程在/proc文件系统中有一个以进程id命名的项。每个进程的细节信息可以在进程id对应的目录下的文件中获得。</p><p><img src=https://dn-mtunique.qbox.me/proc-pid.png alt="output of ls /proc/pid"> <code>ls /proc/pid</code>的输出</p><p>解释/proc文件系统内的所有条目超出了本文的范围。一些有用的列举如下：</p><ul><li>/proc/cmdline -> 内核命令行</li><li>/proc/cpuinfo -> 关于处理器的品牌，型号信息等</li><li>/proc/filesystems -> 文件系统的内核支持的信息</li><li>/proc//cmdline -> 命令行参数传递到当前进程</li><li>/proc//mem -> 当前进程持有的内存</li><li>/proc//status -> 当前进程的状态</li></ul><h3 id=3跟踪>3. 跟踪</h3><p>strace的和ltrace是两个在Linux中用来追踪程序的执行细节的跟踪工具</p><h4 id=strace>strace:</h4><p>strace拦截和记录系统调用并且由它来接收的信号。对于用户，它显示了系统调用，传递给它们的参数和返回值。 strace的可以附着到已在运行的进程中，或到一个新的进程。它作为一个针对开发者和系统管理员的诊断，调试工具是很有用的。它也可以用来当为一个通过跟踪不同的程序调用来了解系统的工具。这个工具的好处是不需要源代码和程序不需要重新编译。</p><p>使用strace的基本语法是：</p><p>strace command</p><p>strace有各种各样的参数。可以检查看strace的手册页来获得更多的细节。</p><p>strace的输出非常长，我们通常不会对显示的每一行都感兴趣。我们可以用<code>-e expr</code>选项来过滤不想要的数据。</p><p>用 <code>-p pid</code> 选项来绑到运行中的进程.</p><p>用<code>-o</code>选项，命令的输出可以被重定向到文件。</p><p><img src=https://dn-mtunique.qbox.me/strace-output.png alt="output of strace filtering only the open system call"> strace过滤成只有系统调用的输出</p><h4 id=ltrace>ltrace:</h4><p>ltrace跟踪和记录一个进程的动态（运行时）库的调用和收到的信号。它也可以跟踪一个进程所作的系统调用。它的用法是类似与strace。</p><p>ltrace command</p><p><code>-i</code> 选项在调用库时打印指令指针。</p><p><code>-S</code> 选项被用来现实系统调用和库调用</p><p>所有可用的选项请参阅ltrace手册。</p><p><img src=https://dn-mtunique.qbox.me/ltrace-output.png alt="output of ltrace capturing strcmp library call"> ltrace捕捉<code>STRCMP</code>库调用的输出</p><h3 id=4valgrind>4. Valgrind</h3><p>Valgrind是一套调试和分析工具。一个被广泛使用的工具，默认的工具被称为<code>Memcheck</code>的拦截malloc()，new()，free()和delete()调用的内存检测工具。换句话说，它在检测下面这些问题非常有用：</p><ul><li>内存泄露</li><li>重释放</li><li>访问越界</li><li>使用未初始化的内存</li><li>使用的内存已经被释放 等。</li></ul><p>它直接通过可执行文件运行。</p><p>Valgrind带有一些缺点。因为它增加了内存占用，可以减慢你的程序。它有时会造成误报和漏报。它不能检测出静态分配的数组的访问越界问题。</p><p>为了用他， 首先下载并安装在你的系统上。 (<a href=http://valgrind.org/downloads.html>Valgrind下载页面</a>). 可以使用操作系统上的包管理起来安装。</p><p>使用命令行安装涉及解压缩，解包下载的文件。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>tar -xjvf valgring-x.y.z.tar.bz2 <span style=color:#f92672>(</span>where x.y.z is the version number you are trying to install<span style=color:#f92672>)</span>
</code></pre></div><p>进入新创建的目录（的valgrind-XYZ）内运行以下命令：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>./configure
make
make install
</code></pre></div><p>让我们通过一个小程序(test.c)来理解valgrind怎么工作的:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=color:#75715e>#include</span><span style=color:#75715e>&lt;stdio.h&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>void</span> <span style=color:#a6e22e>f</span>(<span style=color:#66d9ef>void</span>)

{
<span style=color:#66d9ef>int</span> x <span style=color:#f92672>=</span> malloc(<span style=color:#ae81ff>10</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>sizeof</span>(<span style=color:#66d9ef>int</span>));

x[<span style=color:#ae81ff>10</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
}

<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>()
{
f();
<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
}
</code></pre></div><p>编译程序:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>gcc -o test -g test.c
</code></pre></div><p>现在我们有一个可执行文件叫做<code>test</code>。我们现在可以用valgrind来检测内存错误：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>valgrind –tool<span style=color:#f92672>=</span>memcheck –leak-check<span style=color:#f92672>=</span>yes test
</code></pre></div><p>这是valgrind呈现错误的输出：</p><p><img src=https://dn-mtunique.qbox.me/Valgrind.png alt="output of valgrind showing heap block overrun and memory leak"> valgrind显示堆溢出和内存泄漏的输出</p><p>正如我们在上面看到的消息，我们正在试图访问超出函数f分配的内存和分配的内存没有释放。</p><h3 id=5gdb>5. GDB</h3><p>GDB是来自自由软件基金会的调试器。它对定位和修复代码中的问题很有帮助。当被调试的程序运行时，它给用户控制权去执行各种动作， 比如:</p><ul><li>启动程序</li><li>停在指定位置</li><li>停在指定的条件</li><li>检查所需信息</li><li>改变程序中的数据 等。</li></ul><p>你也可以附加一个崩溃的程序coredump到GDB并分析故障的原因。</p><p>GDB提供很多选项来调试程序。 然而，我们将介绍一些重要的选择，来感受如何开始使用GDB。</p><p>如果你还没有安装GDB，可以在这里下载 <a href=http://www.gnu.org/software/gdb/download/>GDB官方网站</a>.</p><h4 id=编译程序>编译程序:</h4><p>为了用GDB调试程序，必须使用gcc的<code>-g</code>选项进行编译。将以操作系统的本地格式产生调试信息，GDB利用这些信息来工作。</p><p>下面是一个简单的程序（example1.c）执行被零除用来显示GDB的用法:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>divide</span>()
{
<span style=color:#66d9ef>int</span> x<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>, y<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>;
<span style=color:#66d9ef>return</span> x <span style=color:#f92672>/</span> y;
}

<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>()
{
divide();
}
</code></pre></div><p><img src=https://dn-mtunique.qbox.me/gdb-example.png alt="An example showing usage of gdb"> 展示GDB用法的例子</p><h4 id=调用gdb>调用 GDB:</h4><p>通过在命令行中执行<code>gdb</code>来启动gdb:</p><p><img src=https://dn-mtunique.qbox.me/gdb.png alt="invoking gdb"> 调用 gdb</p><p>一旦调用, 它将等待终端命令并执行，直到退出。</p><p>如果一个进程已经在运行，你需要将GDB连接到它上面，可以通过指定进程ID来实现。假设程序已经崩溃，要分析问题的原因，则连接GDB到core文件。</p><h4 id=启动程序>启动程序:</h4><p>一旦你在GDB里面，使用<code>run</code>命令来启动程序进行调试。</p><h4 id=给程序传参数>给程序传参数:</h4><p>使用<code>set args</code>给你的程序传参数，当程序下次运行时将获得参数。<code>show args</code>将显示传递给程序的参数。</p><h4 id=检查堆栈>检查堆栈:</h4><p>每当程序停止，任何人想明白的第一件事就是它为什么停止，以及怎么停在那里的。该信息被称为反向跟踪。由程序产生每个函数调用和局部变量，传递的参数，调用位置等信息一起存储在堆栈内的数据块种，被称为一帧。我们可以使用GDB来检查所有这些数据。GDB从最底层的帧开始给这些帧编号。</p><ul><li>bt: 打印整个堆栈的回溯</li><li>bt  打印n个帧的回溯</li><li>frame : 切换到指定的帧，并打印该帧</li><li>up : 上移<code>n</code>个帧</li><li>down : 下移<code>n</code>个帧 ( n默认是1)</li></ul><h4 id=检查数据>检查数据:</h4><p>程序的数据可以在里面GDB使用<code>print</code>命令进行检查。例如，如果<code>X</code>是调试程序内的变量，<code>print x</code>会打印x的值。</p><h4 id=检查源码>检查源码:</h4><p>源码可以在GDB中打印。默认情况下，<code>list</code>命令会打印10行代码。</p><ul><li>list : 列出<code>linenum</code>行周外的源码</li><li>list : 从<code>function</code>开始列出源码</li><li>disas : 显示该函数机器代码</li></ul><h4 id=停止和恢复程序>停止和恢复程序:</h4><p>使用GDB，我们可以在必要的地方设置断点，观察点等来停止程序。</p><ul><li>break : 在<code>location</code>设置一个断点。当在程序执行到这里时断点将被击中，控制权被交给用户。</li><li>watch : 当<code>expr</code>被程序写而且它的值发生变化时GDB将停止</li><li>catch : 当<code>event</code>发生时GDB停止。</li><li>disable : 禁用指定断点</li><li>enable : 启用指定断点</li><li>delete : 删除 断点/观察点/捕获点。 如果没有传递参数默认操作是在所有的断点。</li><li>step: 一步一步执行程序</li><li>continue: 继续执行程序，直到执行完毕</li></ul><h4 id=退出gdb>退出 GDB:</h4><p>用<code>quit</code>命令还从GDB中退出。</p><p>GDB还有更多的可用选项。里面GDB使用help选项了解更多详情。</p><p><img src=https://dn-mtunique.qbox.me/gdb-help.png alt="getting help within gdb"> 在GDB种获得帮助</p><h3 id=总结>总结</h3><p>在这篇文章中，我们已经看到不同类型的Linux用户空间的调试工具。总结以上所有内容，这是些什么时候使用该什么的快速指南：</p><p>基本调试，获得关键变量 - print 语句</p><p>获取有关文件系统支持，可用内存，CPU，运行程序的内核状态等信息 - 查询 /proc 文件系统</p><p>最初的问题诊断，系统调用或库调用的相关问题，了解程序流程 – strace / ltrace</p><p>应用程序内存空间的问题 – valgrind</p><p>检查应用程序运行时的行为，分析应用程序崩溃 – gdb。</p><hr><p>via: http://linoxide.com/linux-how-to/user-space-debugging-tools-linux/</p><p>作者：<a href=http://linoxide.com/author/bnpoornima/>B N Poornima</a> 译者：<a href=https://github.com/mtunique>mtunique</a></p></div></article><div class=blog-post-comments><div id=disqus_thread><script type=text/javascript>(function(){var a=document.createElement('script'),b;a.type='text/javascript',a.async=!0,b='mtunique',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>Writings</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><ul><li><a href=#1print语句>1.<code>print</code>语句</a></li><li><a href=#2查询>2. 查询</a></li><li><a href=#3跟踪>3. 跟踪</a><ul><li><a href=#strace>strace:</a></li><li><a href=#ltrace>ltrace:</a></li></ul></li><li><a href=#4valgrind>4. Valgrind</a></li><li><a href=#5gdb>5. GDB</a><ul><li><a href=#编译程序>编译程序:</a></li><li><a href=#调用gdb>调用 GDB:</a></li><li><a href=#启动程序>启动程序:</a></li><li><a href=#给程序传参数>给程序传参数:</a></li><li><a href=#检查堆栈>检查堆栈:</a></li><li><a href=#检查数据>检查数据:</a></li><li><a href=#检查源码>检查源码:</a></li><li><a href=#停止和恢复程序>停止和恢复程序:</a></li><li><a href=#退出gdb>退出 GDB:</a></li></ul></li><li><a href=#总结>总结</a></li></ul></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f&text=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f&title=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f&is_video=false&description=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7&body=Check out this article: https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f&title=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f&title=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f&name=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7&description=%e6%a0%b9%e6%8d%ae%e5%ae%9a%e4%b9%89%ef%bc%8c%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7%e6%98%af%e9%82%a3%e4%ba%9b%e9%82%a3%e4%ba%9b%e4%bd%bf%e6%88%91%e4%bb%ac%e8%83%bd%e5%a4%9f%e7%9b%91%e6%b5%8b%e3%80%81%e6%8e%a7%e5%88%b6%e5%92%8c%e7%ba%a0%e6%ad%a3%e5%85%b6%e4%bb%96%e7%a8%8b%e5%ba%8f%e7%9a%84%e7%a8%8b%e5%ba%8f%e3%80%82%e6%88%91%e4%bb%ac%e4%b8%ba%e4%bb%80%e4%b9%88%e5%ba%94%e8%af%a5%e7%94%a8%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7%e5%91%a2%3f%20%e5%9c%a8%e6%9c%89%e4%ba%9b%e6%83%85%e5%86%b5%e4%b8%8b%ef%bc%8c%e8%bf%90%e8%a1%8c%e4%b8%80%e4%ba%9b%e7%a8%8b%e5%ba%8f%e7%9a%84%e6%97%b6%e5%80%99%e6%88%91%e4%bb%ac%e4%bc%9a%e8%a2%ab%e5%8d%a1%e4%bd%8f%ef%bc%8c%e6%88%91%e4%bb%ac%e9%9c%80%e8%a6%81%e6%98%8e%e7%99%bd%e7%a9%b6%e7%ab%9f%e5%8f%91%e7%94%9f%e4%ba%86%e4%bb%80%e4%b9%88%e3%80%82%20%e4%be%8b%e5%a6%82%2c%20%e6%88%91%e4%bb%ac%e6%ad%a3%e5%9c%a8%e8%bf%90%e8%a1%8c%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f%ef%bc%8c%e5%ae%83%e4%ba%a7%e7%94%9f%e4%ba%86%e4%b8%80%e4%ba%9b%e9%94%99%e8%af%af%e6%b6%88%e6%81%af%e3%80%82%e8%a6%81%e4%bf%ae%e5%a4%8d%e8%bf%99%e4%ba%9b%e9%94%99%e8%af%af%ef%bc%8c%e6%88%91%e4%bb%ac%e5%ba%94%e8%af%a5%e5%85%88%e6%89%be%e5%87%ba%e4%b8%ba%e4%bb%80%e4%b9%88%e4%ba%a7%e7%94%9f%e8%bf%99%e4%ba%9b%e9%94%99%e8%af%af%e7%9a%84%e6%b6%88%e6%81%af%e5%92%8c%e8%bf%99%e4%ba%9b%e9%94%99%e8%af%af%e6%b6%88%e6%81%af%e4%bb%8e%e5%93%aa%e9%87%8c%e4%ba%a7%e7%94%9f%e7%9a%84%e3%80%82%20%e4%b8%80%e4%b8%aa%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f%e5%8f%af%e8%83%bd%e7%aa%81%e7%84%b6%e6%8c%82%e8%b5%b7%ef%bc%8c%e6%88%91%e4%bb%ac%e5%bf%85%e9%a1%bb%e4%ba%86%e8%a7%a3%e5%85%b6%e4%bb%96%e4%bb%80%e4%b9%88%e8%bf%9b%e7%a8%8b%e5%90%8c%e6%97%b6%e5%9c%a8%e8%bf%90%e8%a1%8c%e3%80%82%e6%88%91%e4%bb%ac%e5%8f%af%e8%83%bd%e8%bf%98%e5%bf%85%e9%a1%bb%e5%bc%84%e6%b8%85%e6%a5%9a%e8%bf%9b%e7%a8%8bx%e6%8c%82%e8%b5%b7%e7%9a%84%e6%97%b6%e5%80%99%e5%9c%a8%e5%81%9a%e4%bb%80%e4%b9%88%e3%80%82%e4%b8%ba%e4%ba%86%e5%89%96%e6%9e%90%e8%bf%99%e4%ba%9b%e7%bb%86%e8%8a%82%ef%bc%8c%c2%a0%e6%88%91%e4%bb%ac%e9%9c%80%e8%a6%81%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7%e7%9a%84%e5%b8%ae%e5%8a%a9%e3%80%82%e6%9c%89%e5%87%a0%e4%b8%aaLinux%e4%b8%8b%e7%9a%84%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7%e5%92%8c%e6%8a%80%e6%9c%af%ef%bc%8c%e4%bb%96%e4%bb%ac%e7%94%a8%e6%9d%a5%e5%88%86%e6%9e%90%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e9%97%ae%e9%a2%98%e7%9b%b8%e5%bd%93%e6%9c%89%e7%94%a8%e3%80%82%e4%bb%96%e4%bb%ac%e6%98%af%3a%0a%20print%e8%af%ad%e5%8f%a5%20%e6%9f%a5%e8%af%a2%20%28%2fproc%2c%20%2fsys%c2%a0etc%29%20%e8%b7%9f%e8%b8%aa%c2%a0%28strace%2fltrace%29%20Valgrind%c2%a0%28memwatch%29%20GDB%20%20%e8%ae%a9%e6%88%91%e4%bb%ac%e4%b8%80%e4%b8%aa%e4%b8%aa%e5%9c%b0%e4%ba%86%e8%a7%a3%e3%80%82%0a1.print%e8%af%ad%e5%8f%a5%20%e8%bf%99%e6%98%af%e4%b8%80%e4%b8%aa%e5%9f%ba%e6%9c%ac%e7%9a%84%e5%8e%9f%e5%a7%8b%e7%9a%84%e8%b0%83%e8%af%95%e9%97%ae%e9%a2%98%e7%9a%84%e6%96%b9%e6%b3%95%e3%80%82%20%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e5%9c%a8%e7%a8%8b%e5%ba%8f%e4%b8%ad%e6%8f%92%e5%85%a5print%e8%af%ad%e5%8f%a5%e6%9d%a5%e4%ba%86%e8%a7%a3%e6%8e%a7%e5%88%b6%e6%b5%81%e5%92%8c%e5%8f%98%e9%87%8f%e5%80%bc%e3%80%82%20%e8%99%bd%e7%84%b6%e8%bf%99%e6%98%af%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%e6%8a%80%e6%9c%af%2c%20%e4%bd%86%e5%ae%83%e6%9c%89%e4%b8%80%e4%ba%9b%e7%bc%ba%e7%82%b9%e7%9a%84%e3%80%82%20%e7%a8%8b%e5%ba%8f%e9%9c%80%e8%a6%81%e8%bf%9b%e8%a1%8c%e7%bc%96%e8%be%91%e4%bb%a5%e6%b7%bb%e5%8a%a0print%e8%af%ad%e5%8f%a5%ef%bc%8c%e7%84%b6%e5%90%8e%e4%b8%8d%e5%be%97%e4%b8%8d%e9%87%8d%e6%96%b0%e7%bc%96%e8%af%91%ef%bc%8c%e9%87%8d%e6%96%b0%e8%bf%90%e8%a1%8c%e6%9d%a5%e8%8e%b7%e5%be%97%e8%be%93%e5%87%ba%e3%80%82%c2%a0%e5%a6%82%e6%9e%9c%e8%a6%81%e8%b0%83%e8%af%95%e7%9a%84%e7%a8%8b%e5%ba%8f%e7%9b%b8%e5%bd%93%e5%a4%a7%ef%bc%8c%e8%bf%99%e6%98%af%e4%b8%80%e4%b8%aa%e8%80%97%e6%97%b6%e7%9a%84%e6%96%b9%e6%b3%95%e3%80%82%0a2.%c2%a0%e6%9f%a5%e8%af%a2%20%e5%9c%a8%e6%9f%90%e4%ba%9b%e6%83%85%e5%86%b5%e4%b8%8b%ef%bc%8c%e6%88%91%e4%bb%ac%e9%9c%80%e8%a6%81%e5%bc%84%e6%b8%85%e6%a5%9a%e5%9c%a8%e4%b8%80%e4%b8%aa%e8%bf%90%e8%a1%8c%e5%9c%a8%e5%86%85%e6%a0%b8%e4%b8%ad%e7%9a%84%e8%bf%9b%e7%a8%8b%e7%9a%84%e7%8a%b6%e6%80%81%e5%92%8c%e5%86%85%e5%ad%98%e6%98%a0%e5%b0%84%e3%80%82%e4%b8%ba%e4%ba%86%e8%8e%b7%e5%be%97%e8%bf%99%e4%ba%9b%e4%bf%a1%e6%81%af%ef%bc%8c%e6%88%91%e4%bb%ac%e4%b8%8d%e9%9c%80%e8%a6%81%e5%9c%a8%e5%86%85%e6%a0%b8%e4%b8%ad%e6%8f%92%e5%85%a5%e4%bb%bb%e4%bd%95%e4%bb%a3%e7%a0%81%e3%80%82%20%e7%9b%b8%e5%8f%8d%ef%bc%8c%e5%8f%af%e4%bb%a5%e7%94%a8%20%2fproc%c2%a0%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e3%80%82%0a%2fproc%20%e6%98%af%e4%b8%80%e4%b8%aa%e4%bc%aa%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%ef%bc%8c%e7%b3%bb%e7%bb%9f%e4%b8%80%e8%b5%b7%e5%90%af%e5%8a%a8%e8%bf%90%e8%a1%8c%e5%b0%b1%e6%94%b6%e9%9b%86%e7%9d%80%e8%bf%90%e8%a1%8c%e6%97%b6%e7%b3%bb%e7%bb%9f%e7%9a%84%e4%bf%a1%e6%81%af%20%28cpu%e4%bf%a1%e6%81%af%2c%20%e5%86%85%e5%ad%98%e5%ae%b9%e9%87%8f%c2%a0%e7%ad%89%29%e3%80%82%0als%20%2fproc%e7%9a%84%e8%be%93%e5%87%ba%0a%e6%ad%a3%e5%a6%82%e4%bd%a0%e7%9c%8b%e5%88%b0%e7%9a%84%2c%c2%a0%e7%b3%bb%e7%bb%9f%e4%b8%ad%e8%bf%90%e8%a1%8c%e7%9a%84%e6%af%8f%e4%b8%80%e4%b8%aa%e8%bf%9b%e7%a8%8b%e5%9c%a8%2fproc%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e4%b8%ad%e6%9c%89%e4%b8%80%e4%b8%aa%e4%bb%a5%e8%bf%9b%e7%a8%8bid%e5%91%bd%e5%90%8d%e7%9a%84%e9%a1%b9%e3%80%82%e6%af%8f%e4%b8%aa%e8%bf%9b%e7%a8%8b%e7%9a%84%e7%bb%86%e8%8a%82%e4%bf%a1%e6%81%af%e5%8f%af%e4%bb%a5%e5%9c%a8%e8%bf%9b%e7%a8%8bid%e5%af%b9%e5%ba%94%e7%9a%84%e7%9b%ae%e5%bd%95%e4%b8%8b%e7%9a%84%e6%96%87%e4%bb%b6%e4%b8%ad%e8%8e%b7%e5%be%97%e3%80%82%0als%20%2fproc%2fpid%e7%9a%84%e8%be%93%e5%87%ba%0a%e8%a7%a3%e9%87%8a%2fproc%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e5%86%85%e7%9a%84%e6%89%80%e6%9c%89%e6%9d%a1%e7%9b%ae%e8%b6%85%e5%87%ba%e4%ba%86%e6%9c%ac%e6%96%87%e7%9a%84%e8%8c%83%e5%9b%b4%e3%80%82%e4%b8%80%e4%ba%9b%e6%9c%89%e7%94%a8%e7%9a%84%e5%88%97%e4%b8%be%e5%a6%82%e4%b8%8b%ef%bc%9a%0a%20%2fproc%2fcmdline%20-%26gt%3b%c2%a0%e5%86%85%e6%a0%b8%e5%91%bd%e4%bb%a4%e8%a1%8c%20%2fproc%2fcpuinfo%20-%26gt%3b%c2%a0%e5%85%b3%e4%ba%8e%e5%a4%84%e7%90%86%e5%99%a8%e7%9a%84%e5%93%81%e7%89%8c%ef%bc%8c%e5%9e%8b%e5%8f%b7%e4%bf%a1%e6%81%af%e7%ad%89%20%2fproc%2ffilesystems%20-%26gt%3b%c2%a0%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e7%9a%84%e5%86%85%e6%a0%b8%e6%94%af%e6%8c%81%e7%9a%84%e4%bf%a1%e6%81%af%20%2fproc%2f%2fcmdline%20-%26gt%3b%c2%a0%e5%91%bd%e4%bb%a4%e8%a1%8c%e5%8f%82%e6%95%b0%e4%bc%a0%e9%80%92%e5%88%b0%e5%bd%93%e5%89%8d%e8%bf%9b%e7%a8%8b%20%2fproc%2f%2fmem%20-%26gt%3b%c2%a0%e5%bd%93%e5%89%8d%e8%bf%9b%e7%a8%8b%e6%8c%81%e6%9c%89%e7%9a%84%e5%86%85%e5%ad%98%20%2fproc%2f%2fstatus%20-%26gt%3b%c2%a0%e5%bd%93%e5%89%8d%e8%bf%9b%e7%a8%8b%e7%9a%84%e7%8a%b6%e6%80%81%20%203.%c2%a0%e8%b7%9f%e8%b8%aa%20strace%e7%9a%84%e5%92%8cltrace%e6%98%af%e4%b8%a4%e4%b8%aa%e5%9c%a8Linux%e4%b8%ad%e7%94%a8%e6%9d%a5%e8%bf%bd%e8%b8%aa%e7%a8%8b%e5%ba%8f%e7%9a%84%e6%89%a7%e8%a1%8c%e7%bb%86%e8%8a%82%e7%9a%84%e8%b7%9f%e8%b8%aa%e5%b7%a5%e5%85%b7%0astrace%3a%20strace%e6%8b%a6%e6%88%aa%e5%92%8c%e8%ae%b0%e5%bd%95%e7%b3%bb%e7%bb%9f%e8%b0%83%e7%94%a8%e5%b9%b6%e4%b8%94%e7%94%b1%e5%ae%83%e6%9d%a5%e6%8e%a5%e6%94%b6%e7%9a%84%e4%bf%a1%e5%8f%b7%e3%80%82%e5%af%b9%e4%ba%8e%e7%94%a8%e6%88%b7%ef%bc%8c%e5%ae%83%e6%98%be%e7%a4%ba%e4%ba%86%e7%b3%bb%e7%bb%9f%e8%b0%83%e7%94%a8%ef%bc%8c%e4%bc%a0%e9%80%92%e7%bb%99%e5%ae%83%e4%bb%ac%e7%9a%84%e5%8f%82%e6%95%b0%e5%92%8c%e8%bf%94%e5%9b%9e%e5%80%bc%e3%80%82%c2%a0strace%e7%9a%84%e5%8f%af%e4%bb%a5%e9%99%84%e7%9d%80%e5%88%b0%e5%b7%b2%e5%9c%a8%e8%bf%90%e8%a1%8c%e7%9a%84%e8%bf%9b%e7%a8%8b%e4%b8%ad%ef%bc%8c%e6%88%96%e5%88%b0%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e8%bf%9b%e7%a8%8b%e3%80%82%e5%ae%83%e4%bd%9c%e4%b8%ba%e4%b8%80%e4%b8%aa%e9%92%88%e5%af%b9%e5%bc%80%e5%8f%91%e8%80%85%e5%92%8c%e7%b3%bb%e7%bb%9f%e7%ae%a1%e7%90%86%e5%91%98%e7%9a%84%e8%af%8a%e6%96%ad%ef%bc%8c%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7%e6%98%af%e5%be%88%e6%9c%89%e7%94%a8%e7%9a%84%e3%80%82%e5%ae%83%e4%b9%9f%e5%8f%af%e4%bb%a5%e7%94%a8%e6%9d%a5%e5%bd%93%e4%b8%ba%e4%b8%80%e4%b8%aa%e9%80%9a%e8%bf%87%e8%b7%9f%e8%b8%aa%e4%b8%8d%e5%90%8c%e7%9a%84%e7%a8%8b%e5%ba%8f%e8%b0%83%e7%94%a8%e6%9d%a5%e4%ba%86%e8%a7%a3%e7%b3%bb%e7%bb%9f%e7%9a%84%e5%b7%a5%e5%85%b7%e3%80%82%e8%bf%99%e4%b8%aa%e5%b7%a5%e5%85%b7%e7%9a%84%e5%a5%bd%e5%a4%84%e6%98%af%e4%b8%8d%e9%9c%80%e8%a6%81%e6%ba%90%e4%bb%a3%e7%a0%81%e5%92%8c%e7%a8%8b%e5%ba%8f%e4%b8%8d%e9%9c%80%e8%a6%81%e9%87%8d%e6%96%b0%e7%bc%96%e8%af%91%e3%80%82" aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmtunique.com%2fposts%2flinux_userspace%2f&t=Linux%e4%b8%8b%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2021 mtunique</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Writings</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/js/main.js></script></html>